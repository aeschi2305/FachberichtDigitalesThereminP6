\clearpage
\section{Schlusswort}\label{sec:Schlusswort}
Das Projekt 6 umfasste die abschliessende Entwicklung eines digitalen Theremin auf einem FPGA. Die Grundlagen für die Weiterentwicklung stammen aus der Arbeit des Projekt 5 ein Semester zuvor. Diese Grundlagen beinhalteten die Verarbeitung des Antennensignals. 

\paragraph{Ergebnisse}\mbox{}\\

Die Implementierung der Lautstärkesteuerung über eine zweite Antenne ist abgeschlossen und funktioniert einwandfrei. 
Damit diese auch ein Signal erhält ist der zweite analoge Oszillator in einem Redesign des PCB hinzugefügt worden. Dieses Redesign umfasst nebst des zweiten Oszillators eine Speisung der beiden Schaltungen über das gleiche Netzteil wie das FPGA.

Die Bedienung des FPGA läuft über den implementierten Nios-Prozessor und den von ihm gesteuerten LCD Display. Über den integrierten Touchscreen können diverse Einstellungen vorgenommen werden oder Funktionen des Theremin aktiviert oder deaktiviert werden. Der Benutzer kann über den Touchscreen diverse Einstellungen vornehmen und Funktionen des Theremin einfach aktivieren und deaktivieren.

Der Spieler kann die automatische Kalibration des Theremin über das Menu starten um es auf seinen Spielstil abzustimmen. Dazu gleicht das Theremin die beiden digitalen Referenzoszillatoren auf die analogen Antennenoszillatoren ab.

Das Spielen von schönen Tönen ist nun auch möglich, wenn der Spieler keine ruhige Hand hat. Der eingebaute Glissando-Effekt korrigiert während dem Spielen die Töne auf den nächstgelegenen Ton. Gespielt werden kann in zwei Tonsystemen: normale Tonleiter mit Halbtönen oder eine pentatonische Tonleiter. Die pentatonische Tonleiter ist praktisch um ohne grossen Aufwand ansprechend klingende Melodien zu spielen. 

Während dem Spielen ermöglicht es die Anzeige der Spielgenauigkeit zu sehen wie falsch der Spieler seine Hand hält, wenn die pentatonische Tonleiter aktiv ist. Wenn die normale Tonleiter aktiviert ist, wird der nächstgelegene Ton angezeigt. Dies hilft denjenigen Spielern mit weniger musikalischen Talenten.

Schlussendlich wurde das Gerät in ein ansprechendes Gehäuse verpackt. Damit wir ein etwas ausgefalleneres Gehäuse fertigen konnten, entschieden wir uns dieses mit einem 3D-Drucker herzustellen.

\paragraph{Schwierigkeiten}\mbox{}\\

Weil wir viel Zeit für die Inbetriebnahme der ganzen Signalverarbeitung benötigten und wegen Umwelteinflüssen ausserhalb unserer Kontrolle, konnten wir die zusätzlichen Klangeffekte nicht implementieren.\\
Weiter ist beim Spielen bei höheren Frequenzen ein leichtes Aliasing zu hören, was auf den Aufbau der Filter zurückzuführen ist. Die Filter sind so eingestellt, dass dieses Aliasing möglichst minimiert ist.\\
Zuletzt kann bei der höchsten Lautstärkeeinstellung auf dem Display und der tiefsten Einstellung über die entsprechende Antenne ein Rauschen gehört werden. Dies ist auf die Implementierung der Lautstärkeeinstellung zurückzuführen. Bei dieser mussten wir Kompromisse eingehen, wegen Schwierigkeiten mit dem verbauten Codec.

\paragraph{Weiterentwicklung}\mbox{}\\

Das Aliasingproblem könnte durch die Verwendung eines Analog-Digital-Wandlers verkleinert werden. Dies da ein Analog-Digital-Wandler anstelle des Rechtecksignals direkt den Sinus des analogen Oszillators einlesen könnte. Die Multiplikation der Sinusse des Referenzoszillators und des analogen Oszillators würde nur einen hochfrequente Komponente bedeuten ohne Oberwellen. Nötig wäre dazu jedoch ein Wandler mit sehr hoher Abtastfrequenz.

Die Verwendung eines neuen Codec, mit welchem Nullstellenerkennung möglich wäre ist ein Entfernen das Rauschens erreichbar, welches bei bestimmten Gegebenheiten hörbar ist.

Für die zwei zuvor genannten Verbesserungen ist ein Redesign des PCB nötig, bei dem eine Überarbeitung der Oszillatoren nötig ist. Eine Schutzbeschaltung der JFet ist nötig um diese vor statischer Entladung zu schützen.
